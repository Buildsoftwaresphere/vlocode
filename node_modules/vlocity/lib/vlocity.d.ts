/**
 * Simple TS declaration file for Vlocity NPM module
 */
import * as jsforce from 'jsforce';
export = vlocity;

declare class vlocity {
    constructor(options: vlocity.jobOptions);

    checkLogin(onSuccess: any, onError: any): void;

    getNamespace(onSuccess: any, onError: any): any;

    getPackageVersion(onSuccess: any, onError: any): void;

    login(onSuccess: any, onError: any, retryCount: Number): any;

    loginFailedMessage(error: any): any;

    sfdxLogin(onSuccess: any, onError: any): any;

    static runDataPacksCommand(action: vlocity.actionType, options: vlocity.jobOptions): any;

    datapacksjob : vlocity.datapacksjob;

    tempFolder: string;

    jsForceConnection: jsforce.Connection;
}

declare namespace vlocity {

    export class datapacksjob {
        runJob(command : actionType, jobInfo: vlocity.jobOptions, resolve, reject) : Promise<any>
        /**
         * Data loaded from 'defaultjobsettings.yaml'
         */
        defaultJobSettings: any;
        /**
         * Data loaded from 'querydefinition.yaml'
         */
        queryDefinitions: any;
    }

    export interface jobOptions {
        sfdxUsername?: String;
        username?: String;
        password?: String;
        vlocityNamespace?: String;
        loginUrl?: String;
        accessToken?: String;
        sessionId?: String;
        instanceUrl?: String;
        httpProxy?: String;
        verbose?: Boolean;
        performance?: Boolean;
        passedInOptionsOverride?: String;
        commandLineOptionsOverride?: String;
        projectPath? : String;
        maxDepth?: Number;
        // From JobInfo
        strict?:  Boolean;
        continueAfterError?: Boolean;
        supportHeadersOnly?: Boolean;
        supportForceDeploy?: Boolean;
        ignoreAllErrors?: Boolean;
    }

    type actionType = 
        'Export' | 
        'Import' | 
        'Deploy' | 
        'BuildFile' | 
        'ExpandFile' | 
        'GetDiffs' | 
        'GetDiffsAndDeploy' | 
        'GetAllAvailableExports' |
        'RefreshProject' |
        'BuildManifest' |
        'ValidateLocalData' |
        'CleanOrgData' |
        'UpdateSettings' |
        'RefreshVlocityBase' |
        'Apex' |
        'JavaScript';

}

